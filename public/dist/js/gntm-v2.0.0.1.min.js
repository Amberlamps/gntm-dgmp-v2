!function t(e,o,i){function s(r,a){if(!o[r]){if(!e[r]){var c="function"==typeof require&&require;if(!a&&c)return c(r,!0);if(n)return n(r,!0);var p=new Error("Cannot find module '"+r+"'");throw p.code="MODULE_NOT_FOUND",p}var l=o[r]={exports:{}};e[r][0].call(l.exports,function(t){var o=e[r][1][t];return s(o?o:t)},l,l.exports,t,e,o,i)}return o[r].exports}for(var n="function"==typeof require&&require,r=0;r<i.length;r++)s(i[r]);return s}({1:[function(t){t("./components").Login,t("./router.js")},{"./components":3,"./router.js":18}],2:[function(t,e){"use strict";function o(t,e){var o={callback:e||function(){}};t.find("form").on("submit",i.bind(null,o))}function i(t,e){e.preventDefault();var o=e.currentTarget;t.url=o.getAttribute("data-action"),t.type=o.getAttribute("data-method"),t.form=o;var i=o.getAttribute("data-html");return i&&"false"!==i||(t.url=a+t.url),n(s(o),t),!1}function s(t){for(var e={},o=0;o<t.length;o++){var i=t[o];("text"===i.type||"password"===i.type||"hidden"===i.type)&&(e[i.name]=i.value)}return e}function n(t,e){function o(t,o,i){e.callback(null,t,o,i,e.form)}function i(t,o,i){var s={response:t,status:o,error:i,form:e.form};e.callback(s)}e=e||{},e.method=e.type||"get",e.url=e.url||"",e.contentType=e.contentType||"application/json",e.dataType=e.dataType||"json";var s={url:e.url,type:e.method,contentType:e.contentType+"; charset=UTF-8",dataType:e.dataType,success:o,error:i};s.data=JSON.stringify(t),$.ajax(s)}var r=t("../config.js"),a=["",r.client.api.path,r.client.api.version].join("/");e.exports={enable:o}},{"../config.js":6}],3:[function(t,e){e.exports.forms=t("./forms.js"),e.exports.lists=t("./lists.js"),e.exports.Login=t("./login.js")},{"./forms.js":2,"./lists.js":4,"./login.js":5}],4:[function(t,e){"use strict";function o(t){$.each(t.find(".list"),function(t,e){e=$(e),"false"!==e.attr("data-enable")&&i(e)})}function i(t){t.find(".list-handle").click(s.bind(null,t))}function s(t,e){var o=$(e.currentTarget),i=o.attr("data-sortname"),s=o.attr("data-sortorder"),n="asc"===s?1:-1,r=o.attr("data-type")||"string",a=t.find(".list-item");a.sort(function(t,e){var o=$(t).attr("data-"+i),s=$(e).attr("data-"+i);return"number"===r?(o=+o,s=+s):"date"===r&&(o=o?new Date(o):new Date(2016,0,1),s=s?new Date(s):new Date(2016,0,1)),o>s?1*n:s>o?-1*n:0}),o.attr("data-sortorder",1===n?"desc":"asc"),$.each(a,function(e,o){t.append(o)})}e.exports={enable:o}},{}],5:[function(t,e){function o(){location.href="/login"}function i(t){swal({title:"Oops...",text:t.responseJSON.message,type:"error"})}e.exports={path:"/login",onSuccess:o,onError:i}},{}],6:[function(t,e){var o={client:{api:{path:"api",version:1}}};e.exports=o},{}],7:[function(t,e){e.exports.IndexPage=t("./indexPage.js"),e.exports.LeaguePage=t("./leaguePage.js"),e.exports.LeaguesPage=t("./leaguesPage.js"),e.exports.LeaguesAddPage=t("./leaguesAddPage.js"),e.exports.LivePage=t("./livePage.js"),e.exports.LoginPage=t("./loginPage.js"),e.exports.LogoutPage=t("./logoutPage.js"),e.exports.ModelsPage=t("./modelsPage.js"),e.exports.Page=t("./page.js"),e.exports.RulebooksPage=t("./rulebooksPage.js")},{"./indexPage.js":8,"./leaguePage.js":9,"./leaguesAddPage.js":10,"./leaguesPage.js":11,"./livePage.js":12,"./loginPage.js":13,"./logoutPage.js":14,"./modelsPage.js":15,"./page.js":16,"./rulebooksPage.js":17}],8:[function(t,e){"use strict";function o(t,e){i.call(this,t,e),this.path=t,this.params=e}var i=t("./page.js");o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.render=function(t,e,o){o(null,this.container)},o.prototype._formCallback=function(t,e){return t?swal({title:"Error!",text:t.response.responseJSON.message,type:"error"}):(swal({title:"Juchu!",text:e.message,type:"success"}),void window.setTimeout(function(){location.href="/"},1e3))},e.exports=o},{"./page.js":16}],9:[function(t,e){"use strict";function o(t,e){i.call(this,t,e),this.path=t,this.params=e}var i=t("./page.js");o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.render=function(t,e,o){o(null,this.container)},o.prototype._formCallback=function(t,e,o,i,s){return t?swal({title:"Error!",text:t.error,type:"error"}):void("enterLeague"===s.name?(swal({title:"Bewerbung gesendet!",text:"Dein Antrag muss noch bestätigt werden.",type:"success"}),$(s).remove()):"confirmMember"===s.name?(swal({title:"Bestätigung erfolgreich!",text:"Deine Liga hat ein neues Mitglied.",type:"success",timer:1500}),$(s).remove()):"deleteMember"===s.name&&(swal({title:"Bewerbung gelöscht!",text:"Die Bewerbung des Spielers wurde erfolgreich gelöscht.",type:"success",timer:1500}),$(s).parent().remove()))},e.exports=o},{"./page.js":16}],10:[function(t,e){"use strict";function o(t,e){i.call(this,t,e),this.path=t,this.params=e}var i=t("./page.js");o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.render=function(t,e,o){o(null,this.container)},o.prototype._formCallback=function(e,o){return e?swal({title:"Error!",text:e.error,type:"error"}):void t("../router").getPage("/leagues/"+o.league._id+"/",!0)},e.exports=o},{"../router":18,"./page.js":16}],11:[function(t,e){"use strict";function o(t,e){i.call(this,t,e),this.path=t,this.params=e}var i=t("./page.js");o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.render=function(t,e,o){o(null,this.container)},e.exports=o},{"./page.js":16}],12:[function(t,e){"use strict";function o(t,e){i.call(this,t,e),this.path=t,this.params=e,this.container=$(".livepage")}var i=t("./page.js"),s=t("../config.js"),n=(["",s.client.api.path,s.client.api.version].join("/"),[[1,1],[1,2],[2,2],[2,2],[2,3],[2,3],[3,3],[3,3],[3,3],[3,4],[3,4],[3,4],[4,4],[4,4],[4,4],[4,4],[4,5],[4,5],[4,5],[4,5],[5,5],[5,5],[5,5],[5,5],[5,5],[5,6],[5,6],[5,6],[5,6],[5,6],[6,6],[6,6],[6,6],[6,6],[6,6]]);o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.render=function(t,e,o){o(null,this.container)},o.prototype.activated=function(){this.closeup=this.container.find(".live-closeup"),this.initSlider(),this.initDimensions(),this.openCloseup(),this.initCloseup(),this.closeCloseup(),this.container.find(".live-girl").click(this.girlClick.bind(this))},o.prototype.girlClick=function(t){this.openCloseup(),this.closeupGirl=$(t.currentTarget),this.closeupName.text(this.closeupGirl.find(".live-girl-name").text()),this.closeupDrinks.text(this.closeupGirl.find(".live-girl-stats-drinks").text()),this.closeupJobs.text(this.closeupGirl.find(".live-girl-stats-jobs").text()),this.closeupPicture.attr("style",this.closeupGirl.attr("style"))},o.prototype.openCloseup=function(){this.closeup.css({display:"block"})},o.prototype.closeCloseup=function(){this.closeup.css({display:"none"})},o.prototype.actionClick=function(t,e){var o=$(e.currentTarget),i=o.parent(),s=+i.find(".live-action-value").text()*t;if(i.attr("class").match(/drink/)){var n=+this.closeupDrinks.text()+s;0>n&&(n=0),this.closeupDrinks.text(n),this.closeupGirl.find(".live-girl-stats-drinks").text(n)}else if(i.attr("class").match(/job/)){var n=+this.closeupJobs.text()+1;0>n&&(n=0),this.closeupJobs.text(n),this.closeupGirl.find(".live-girl-stats-jobs").text(n)}window.setTimeout(this.closeCloseup.bind(this),500)},o.prototype.initCloseup=function(){var t=this.closeup.find(".live-girl-container"),e=.5*this.closeup.find(".live-closeup-girl").width();t.css({height:e,width:e,position:"absolute",top:"50%",right:60,marginTop:0-e/2});var o=this.container.find(".live-closeup-actions-container");o.height()>this.closeup.height()?this.container.find(".live-closeup-actions").css({"overflow-y":"scroll"}):o.css({position:"absolute",top:"50%",left:0,marginTop:0-o.height()/2,width:"100%"}),this.closeup.find(".live-closeup-close").click(this.closeCloseup.bind(this)),this.closeupPicture=this.closeup.find(".live-girl"),this.closeupName=this.closeup.find(".live-girl-name"),this.closeupDrinks=this.closeup.find(".live-girl-stats-drinks"),this.closeupJobs=this.closeup.find(".live-girl-stats-jobs"),this.closeup.find(".live-action-plus").click(this.actionClick.bind(this,1)),this.closeup.find(".live-action-minus").click(this.actionClick.bind(this,-1))},o.prototype.initSlider=function(){var t=this;t.statisticsOpen=!1,t.statistics=t.container.find(".live-statistics"),t.statistics.css({marginLeft:$(window).width()}),t.slider=t.statistics.find(".live-slider"),t.slider.click(function(){t.statisticsOpen?t.statistics.animate({marginLeft:$(window).width()},250):t.statistics.animate({marginLeft:0},250),t.statisticsOpen=!t.statisticsOpen})},o.prototype.initDimensions=function(){var t=this.container.find(".live-girl-container"),e=n[t.length-1],o={width:100/e[1]+"%",height:100/e[0]+"%"};t.css(o)},e.exports=o},{"../config.js":6,"./page.js":16}],13:[function(t,e){"use strict";function o(t,e){i.call(this,t,e),this.path=t,this.params=e}var i=t("./page.js");o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.render=function(t,e,o){return 204===e.status?location.href="/":void o(null,this.container)},o.prototype._formCallback=function(t,e){return t?swal({title:"Error!",text:t.error,type:"error"}):(swal({title:"Juchu!",text:e.message,type:"success"}),void window.setTimeout(function(){location.href="/"},1e3))},e.exports=o},{"./page.js":16}],14:[function(t,e){"use strict";function o(t,e){i.call(this,t,e),this.path=t,this.params=e}var i=t("./page.js");o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.render=function(){location.href="/"},e.exports=o},{"./page.js":16}],15:[function(t,e){"use strict";function o(t,e){i.call(this,t,e),this.path=t,this.params=e}var i=t("./page.js");o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.render=function(t,e,o){o(null,this.container)},e.exports=o},{"./page.js":16}],16:[function(t,e){"use strict";function o(t,e){this.path=t,this.params=e,this.container=$(".mainpage")}var i=t("../components").forms,s=t("../components").lists;o.prototype.init=function(t){function e(e,o,s){i.container.html(e),i.activatePage(),i.render(e,s,t)}function o(e,o,s){swal({title:"Oops...",text:s,type:"error"}),"[object Function]"===Object.prototype.toString.call(i.error)?i.error(e,o,s):t(e)}var i=this;$.ajax({type:"get",url:this.path,success:e,error:o})},o.prototype.render=function(t,e,o){o(null,this.container)},o.prototype._formCallback=function(){console.log(arguments)},o.prototype.activatePage=function(){i.enable(this.container,this._formCallback.bind(this)),s.enable(this.container),this.activated&&"[object Function]"===Object.prototype.toString.call(this.activated)&&this.activated()},e.exports=o},{"../components":3}],17:[function(t,e){"use strict";function o(t,e){i.call(this,t,e),this.path=t,this.params=e}var i=t("./page.js");o.prototype=Object.create(i.prototype),o.prototype.constructor=o,o.prototype.render=function(t,e,o){o(null,this.container)},e.exports=o},{"./page.js":16}],18:[function(t,e){"use strict";function o(t){var e=[];return t="^"+t+"$",t=t.replace(/(:.*?)(\?|\$|\/)/g,function(t,o,i){return e.push(o.substr(1)),"(.*?)"+i}),{path:t,lookup:e}}function i(t,e){if(t!==j||b){console.log(t);for(var o=0,i=y.length;i>o;o++){var n=y[o],a=t.match(n.route);if(a){var c={};n.lookup.forEach(function(t,e){var o=a[e+1];o&&("/"===o.charAt(o.length-1)&&(o=o.substr(0,o.length-1)),c[t]=o)}),NProgress.start();var p=new n.page(t,c);b?(p.activatePage(),NProgress.done(),b=!1):p.init(function(o,i){return NProgress.done(),o?!1:(j=t,e&&r(t),void s(i))});break}}}}function s(t){t.find("a").click(n)}function n(t){t.preventDefault();var e=this.pathname;"/"!==e.charAt(e.length-1)&&(e+="/"),i(e,!0)}var r,a,c=(t("./config.js"),t("./pages").IndexPage),p=t("./pages").LeaguesPage,l=t("./pages").LeaguePage,u=t("./pages").LeaguesAddPage,g=t("./pages").LivePage,h=t("./pages").LoginPage,f=t("./pages").LogoutPage,d=t("./pages").ModelsPage,v=(t("./pages").Page,t("./pages").RulebooksPage),y=[],m={"/":c,"/leagues/add/":u,"/leagues/":p,"/leagues/:leagueId/:page?":l,"/live/":g,"/login/":h,"/logout/":f,"/models/:modelId?":d,"/rulebooks/:rulebookId?":v},j=location.pathname,b=!0;for(var x in m){var w=m[x],P=o(x);y.push({route:new RegExp(P.path),lookup:P.lookup,page:w})}history.pushState?(r=function(t){history.pushState(null,null,t)},a=function(){i(location.pathname)},window.setTimeout(function(){$(window).on("popstate",a)},1e3)):(r=function(t){location.hash="!"+t},a=function(){i(location.hash.substr(2))},location.hash&&a(),$(window).on("hashchange",a)),s($("body")),"/"!==j.charAt(j.length-1)&&(j+="/"),i(j),e.exports={getPage:i}},{"./config.js":6,"./pages":7}]},{},[1]);
//# sourceMappingURL=gntm-v2.0.0.1.min.js.map