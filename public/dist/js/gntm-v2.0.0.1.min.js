!function t(e,o,r){function n(s,i){if(!o[s]){if(!e[s]){var p="function"==typeof require&&require;if(!i&&p)return p(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var u=o[s]={exports:{}};e[s][0].call(u.exports,function(t){var o=e[s][1][t];return n(o?o:t)},u,u.exports,t,e,o,r)}return o[s].exports}for(var a="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t){t("./components").Login,t("./router.js")},{"./components":3,"./router.js":16}],2:[function(t,e){"use strict";function o(t,e){var o={callback:e||function(){}};t.find("form").on("submit",r.bind(null,o))}function r(t,e){e.preventDefault();var o=e.currentTarget;t.url=o.getAttribute("data-action"),t.type=o.getAttribute("data-method"),t.form=o;var r=o.getAttribute("data-html");return r&&"false"!==r||(t.url=i+t.url),a(n(o),t),!1}function n(t){for(var e={},o=0;o<t.length;o++){var r=t[o];("text"===r.type||"password"===r.type||"hidden"===r.type)&&(e[r.name]=r.value)}return e}function a(t,e){function o(t,o,r){e.callback(null,t,o,r,e.form)}function r(t,o,r){var n={response:t,status:o,error:r,form:e.form};e.callback(n)}e=e||{},e.method=e.type||"get",e.url=e.url||"",e.contentType=e.contentType||"application/json",e.dataType=e.dataType||"json";var n={url:e.url,type:e.method,contentType:e.contentType+"; charset=UTF-8",dataType:e.dataType,success:o,error:r};n.data=JSON.stringify(t),$.ajax(n)}var s=t("../config.js"),i=["",s.client.api.path,s.client.api.version].join("/");e.exports={enable:o}},{"../config.js":5}],3:[function(t,e){e.exports.forms=t("./forms.js"),e.exports.Login=t("./login.js")},{"./forms.js":2,"./login.js":4}],4:[function(t,e){function o(){location.href="/login"}function r(t){swal({title:"Oops...",text:t.responseJSON.message,type:"error"})}e.exports={path:"/login",onSuccess:o,onError:r}},{}],5:[function(t,e){var o={client:{api:{path:"api",version:1}}};e.exports=o},{}],6:[function(t,e){e.exports.IndexPage=t("./indexPage.js"),e.exports.LeaguePage=t("./leaguePage.js"),e.exports.LeaguesPage=t("./leaguesPage.js"),e.exports.LeaguesAddPage=t("./leaguesAddPage.js"),e.exports.LoginPage=t("./loginPage.js"),e.exports.LogoutPage=t("./logoutPage.js"),e.exports.ModelsPage=t("./modelsPage.js"),e.exports.Page=t("./page.js"),e.exports.RulebooksPage=t("./rulebooksPage.js")},{"./indexPage.js":7,"./leaguePage.js":8,"./leaguesAddPage.js":9,"./leaguesPage.js":10,"./loginPage.js":11,"./logoutPage.js":12,"./modelsPage.js":13,"./page.js":14,"./rulebooksPage.js":15}],7:[function(t,e){"use strict";function o(t,e){r.call(this,t,e),this.path=t,this.params=e}var r=t("./page.js");o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.prototype.render=function(t,e,o){o(null,this.container)},o.prototype._formCallback=function(t,e){return t?swal({title:"Error!",text:t.response.responseJSON.message,type:"error"}):(swal({title:"Juchu!",text:e.message,type:"success"}),void window.setTimeout(function(){location.href="/"},1e3))},e.exports=o},{"./page.js":14}],8:[function(t,e){"use strict";function o(t,e){r.call(this,t,e),this.path=t,this.params=e}var r=t("./page.js");o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.prototype.render=function(t,e,o){o(null,this.container)},o.prototype._formCallback=function(t,e,o,r,n){return t?swal({title:"Error!",text:t.error,type:"error"}):void("enterLeague"===n.name?(swal({title:"Bewerbung gesendet!",text:"Dein Antrag muss noch bestätigt werden.",type:"success"}),$(n).remove()):"confirmMember"===n.name?(swal({title:"Bestätigung erfolgreich!",text:"Deine Liga hat ein neues Mitglied.",type:"success",timer:1500}),$(n).remove()):"deleteMember"===n.name&&(swal({title:"Bewerbung gelöscht!",text:"Die Bewerbung des Spielers wurde erfolgreich gelöscht.",type:"success",timer:1500}),$(n).parent().remove()))},e.exports=o},{"./page.js":14}],9:[function(t,e){"use strict";function o(t,e){r.call(this,t,e),this.path=t,this.params=e}var r=t("./page.js");o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.prototype.render=function(t,e,o){o(null,this.container)},o.prototype._formCallback=function(e,o){return e?swal({title:"Error!",text:e.error,type:"error"}):void t("../router").getPage("/leagues/"+o.league._id+"/",!0)},e.exports=o},{"../router":16,"./page.js":14}],10:[function(t,e){"use strict";function o(t,e){r.call(this,t,e),this.path=t,this.params=e}var r=t("./page.js");o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.prototype.render=function(t,e,o){o(null,this.container)},e.exports=o},{"./page.js":14}],11:[function(t,e){"use strict";function o(t,e){r.call(this,t,e),this.path=t,this.params=e}var r=t("./page.js");o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.prototype.render=function(t,e,o){return 204===e.status?location.href="/":void o(null,this.container)},o.prototype._formCallback=function(t,e){return t?swal({title:"Error!",text:t.error,type:"error"}):(swal({title:"Juchu!",text:e.message,type:"success"}),void window.setTimeout(function(){location.href="/"},1e3))},e.exports=o},{"./page.js":14}],12:[function(t,e){"use strict";function o(t,e){r.call(this,t,e),this.path=t,this.params=e}var r=t("./page.js");o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.prototype.render=function(){location.href="/"},e.exports=o},{"./page.js":14}],13:[function(t,e){"use strict";function o(t,e){r.call(this,t,e),this.path=t,this.params=e}var r=t("./page.js");o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.prototype.render=function(t,e,o){o(null,this.container)},e.exports=o},{"./page.js":14}],14:[function(t,e){"use strict";function o(t,e){this.path=t,this.params=e,this.container=$(".mainpage")}var r=t("../components").forms;o.prototype.init=function(t){function e(e,o,n){r.container.html(e),r.activatePage(),r.render(e,n,t)}function o(e,o,n){swal({title:"Oops...",text:n,type:"error"}),"[object Function]"===Object.prototype.toString.call(r.error)?r.error(e,o,n):t(e)}var r=this;$.ajax({type:"get",url:this.path,success:e,error:o})},o.prototype.render=function(t,e,o){o(null,this.container)},o.prototype._formCallback=function(){console.log(arguments)},o.prototype.activatePage=function(){r.enable(this.container,this._formCallback.bind(this))},e.exports=o},{"../components":3}],15:[function(t,e){"use strict";function o(t,e){r.call(this,t,e),this.path=t,this.params=e}var r=t("./page.js");o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.prototype.render=function(t,e,o){o(null,this.container)},e.exports=o},{"./page.js":14}],16:[function(t,e){"use strict";function o(t){var e=[];return t="^"+t+"$",t=t.replace(/(:.*?)(\?|\$|\/)/g,function(t,o,r){return e.push(o.substr(1)),"(.*?)"+r}),{path:t,lookup:e}}function r(t,e){if(t!==j||v){console.log(t);for(var o=0,r=y.length;r>o;o++){var a=y[o],i=t.match(a.route);if(i){var p={};a.lookup.forEach(function(t,e){var o=i[e+1];o&&("/"===o.charAt(o.length-1)&&(o=o.substr(0,o.length-1)),p[t]=o)}),NProgress.start();var c=new a.page(t,p);v?(c.activatePage(),NProgress.done(),v=!1):c.init(function(o,r){return NProgress.done(),o?!1:(j=t,e&&s(t),void n(r))});break}}}}function n(t){t.find("a").click(a)}function a(t){t.preventDefault();var e=this.pathname;"/"!==e.charAt(e.length-1)&&(e+="/"),r(e,!0)}var s,i,p=(t("./config.js"),t("./pages").IndexPage),c=t("./pages").LeaguesPage,u=t("./pages").LeaguePage,l=t("./pages").LeaguesAddPage,g=t("./pages").LoginPage,f=t("./pages").LogoutPage,h=t("./pages").ModelsPage,d=(t("./pages").Page,t("./pages").RulebooksPage),y=[],m={"/":p,"/leagues/add/":l,"/leagues/":c,"/leagues/:leagueId/:page?":u,"/login/":g,"/logout/":f,"/models/:modelId?":h,"/rulebooks/:rulebookId?":d},j=location.pathname,v=!0;for(var x in m){var b=m[x],P=o(x);y.push({route:new RegExp(P.path),lookup:P.lookup,page:b})}history.pushState?(s=function(t){history.pushState(null,null,t)},i=function(){r(location.pathname)},window.setTimeout(function(){$(window).on("popstate",i)},1e3)):(s=function(t){location.hash="!"+t},i=function(){r(location.hash.substr(2))},location.hash&&i(),$(window).on("hashchange",i)),n($("body")),"/"!==j.charAt(j.length-1)&&(j+="/"),r(j),e.exports={getPage:r}},{"./config.js":5,"./pages":6}]},{},[1]);
//# sourceMappingURL=gntm-v2.0.0.1.min.js.map