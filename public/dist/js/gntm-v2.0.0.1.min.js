!function t(e,i,o){function n(r,a){if(!i[r]){if(!e[r]){var c="function"==typeof require&&require;if(!a&&c)return c(r,!0);if(s)return s(r,!0);var p=new Error("Cannot find module '"+r+"'");throw p.code="MODULE_NOT_FOUND",p}var l=i[r]={exports:{}};e[r][0].call(l.exports,function(t){var i=e[r][1][t];return n(i?i:t)},l,l.exports,t,e,i,o)}return i[r].exports}for(var s="function"==typeof require&&require,r=0;r<o.length;r++)n(o[r]);return n}({1:[function(t){t("./components").Login,t("./router.js")},{"./components":3,"./router.js":18}],2:[function(t,e){"use strict";function i(t,e){var i={callback:e||function(){}};t.find("form").on("submit",n.bind(null,i)),t.find("form .submit-substitute").click(o)}function o(t){var e=t.currentTarget,i=e.getAttribute("data-form"),o=document.forms[i];if(o){if(!o.submitButton){var n=document.createElement("input");n.type="submit",n.setAttribute("style","display:none"),o.appendChild(n),o.submitButton=n}o.submitButton.click()}}function n(t,e){e.preventDefault();var i=e.currentTarget;t.url=i.getAttribute("data-action"),t.type=i.getAttribute("data-method"),t.form=i;var o=i.getAttribute("data-html");return o&&"false"!==o||(t.url=c+t.url),r(s(i),t),!1}function s(t){for(var e={},i=0;i<t.length;i++){var o=t[i];("text"===o.type||"password"===o.type||"hidden"===o.type)&&(e[o.name]=o.value)}return e}function r(t,e){function i(t,i,o){e.callback(null,t,i,o,e.form)}function o(t,i,o){var n={response:t,status:i,error:o,form:e.form};e.callback(n)}e=e||{},e.method=e.type||"get",e.url=e.url||"",e.contentType=e.contentType||"application/json",e.dataType=e.dataType||"json";var n={url:e.url,type:e.method,contentType:e.contentType+"; charset=UTF-8",dataType:e.dataType,success:i,error:o};n.data=JSON.stringify(t),$.ajax(n)}var a=t("../config.js"),c=["",a.client.api.path,a.client.api.version].join("/");e.exports={enable:i}},{"../config.js":6}],3:[function(t,e){e.exports.forms=t("./forms.js"),e.exports.lists=t("./lists.js"),e.exports.Login=t("./login.js")},{"./forms.js":2,"./lists.js":4,"./login.js":5}],4:[function(t,e){"use strict";function i(t){$.each(t.find(".list"),function(t,e){e=$(e),"false"!==e.attr("data-enable")&&o(e)})}function o(t){t.find(".list-handle").click(n.bind(null,t))}function n(t,e){var i=$(e.currentTarget),o=i.attr("data-sortname"),n=i.attr("data-sortorder"),s="asc"===n?1:-1,r=i.attr("data-type")||"string",a=t.find(".list-item");a.sort(function(t,e){var i=$(t).attr("data-"+o),n=$(e).attr("data-"+o);return"number"===r?(i=+i,n=+n):"date"===r&&(i=i?new Date(i):new Date(2016,0,1),n=n?new Date(n):new Date(2016,0,1)),i>n?1*s:n>i?-1*s:0}),i.attr("data-sortorder",1===s?"desc":"asc"),$.each(a,function(e,i){t.append(i)})}e.exports={enable:i}},{}],5:[function(t,e){function i(){location.href="/login"}function o(t){swal({title:"Oops...",text:t.responseJSON.message,type:"error"})}e.exports={path:"/login",onSuccess:i,onError:o}},{}],6:[function(t,e){var i={client:{api:{path:"api",version:1}}};e.exports=i},{}],7:[function(t,e){e.exports.IndexPage=t("./indexPage.js"),e.exports.LeaguePage=t("./leaguePage.js"),e.exports.LeaguesPage=t("./leaguesPage.js"),e.exports.LeaguesAddPage=t("./leaguesAddPage.js"),e.exports.LivePage=t("./livePage.js"),e.exports.LoginPage=t("./loginPage.js"),e.exports.LogoutPage=t("./logoutPage.js"),e.exports.ModelsPage=t("./modelsPage.js"),e.exports.Page=t("./page.js"),e.exports.RulebooksPage=t("./rulebooksPage.js")},{"./indexPage.js":8,"./leaguePage.js":9,"./leaguesAddPage.js":10,"./leaguesPage.js":11,"./livePage.js":12,"./loginPage.js":13,"./logoutPage.js":14,"./modelsPage.js":15,"./page.js":16,"./rulebooksPage.js":17}],8:[function(t,e){"use strict";function i(t,e){o.call(this,t,e),this.path=t,this.params=e}var o=t("./page.js");i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.render=function(t,e,i){i(null,this.container)},i.prototype._formCallback=function(t,e){return t?swal({title:"Error!",text:t.response.responseJSON.message,type:"error"}):(swal({title:"Juchu!",text:e.message,type:"success"}),void window.setTimeout(function(){location.href="/"},1e3))},e.exports=i},{"./page.js":16}],9:[function(t,e){"use strict";function i(t,e){s.call(this,t,e),this.path=t,this.params=e}var o,n,s=t("./page.js");i.prototype=Object.create(s.prototype),i.prototype.constructor=i,i.prototype.render=function(t,e,i){this._activated(),i(null,this.container)},i.prototype._activated=function(){function t(t){$(t.element).css({zIndex:4}),o.css({opacity:.7}),n.css({marginTop:0-n.height()})}function e(t){$(t.element).css({zIndex:0,top:0,left:0}).addClass("animate"),o.css({opacity:0}),n.css({marginTop:0})}o=this.container.find(".roaster-overlay"),n=this.container.find(".roaster-overlay-menu"),this.container.find(".roaster-girl").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){var t=$(this);t.removeClass("animate")}),$.each(this.container.find(".roaster-girl"),function(i,o){var n=new Draggabilly(o,function(){console.log(arguments)});n.on("dragStart",t),n.on("dragEnd",e)})},i.prototype.activated=function(){this._activated()},i.prototype.roasterGirlStart=function(t){var e=t.currentTarget;e.clientX=t.clientX,e.clientY=t.clientY,e.activated=!0,o.css({opacity:1,display:"block"}),$(e).css({zIndex:3})},i.prototype.roasterGirlMove=function(t){var e=t.currentTarget;if(e.activated){var i=t.clientX-e.clientX,o=t.clientY-e.clientY;$(e).css({transform:"translate3d("+i+"px, "+o+"px, 0px)"})}},i.prototype.roasterGirlStop=function(t){var e=t.currentTarget;e.activated=!1,e=$(e),e.addClass("animate"),e.css({transform:"translate3d(0px, 0px, 0px)",zIndex:0}),o.css({opacity:0})},i.prototype._formCallback=function(t,e,i,o,n){return t?swal({title:"Error!",text:t.error,type:"error"}):void("enterLeague"===n.name?(swal({title:"Bewerbung gesendet!",text:"Dein Antrag muss noch bestätigt werden.",type:"success"}),$(n).remove()):"confirmMember"===n.name?(swal({title:"Bestätigung erfolgreich!",text:"Deine Liga hat ein neues Mitglied.",type:"success",timer:1500}),$(n).remove()):"denyMember"===n.name?(swal({title:"Bewerbung gelöscht!",text:"Die Bewerbung des Spielers wurde erfolgreich gelöscht.",type:"success",timer:1500}),$(n).parent().parent().remove()):"deleteMember"===n.name?(swal({title:"Mitglied gelöscht!",text:"Das Mitglied wurde erfolgreich gelöscht.",type:"success",timer:1500}),$(n).parent().parent().remove()):"cancelSubscription"===n.name&&(swal({title:"Antrag zurückgezogen!",text:"Dein Antrag wurde erfolgreich zurückgezogen.",type:"success",timer:1500}),$(n).parent().parent().remove()))},e.exports=i},{"./page.js":16}],10:[function(t,e){"use strict";function i(t,e){o.call(this,t,e),this.path=t,this.params=e}var o=t("./page.js");i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.render=function(t,e,i){i(null,this.container)},i.prototype._formCallback=function(e,i){return e?swal({title:"Error!",text:e.error,type:"error"}):void t("../router").getPage("/leagues/"+i.league._id+"/",!0)},e.exports=i},{"../router":18,"./page.js":16}],11:[function(t,e){"use strict";function i(t,e){o.call(this,t,e),this.path=t,this.params=e}var o=t("./page.js");i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.render=function(t,e,i){i(null,this.container)},e.exports=i},{"./page.js":16}],12:[function(t,e){"use strict";function i(t,e){o.call(this,t,e),this.path=t,this.params=e,this.container=$(".livepage")}var o=t("./page.js"),n=t("../config.js"),s=(["",n.client.api.path,n.client.api.version].join("/"),[[1,1],[1,2],[2,2],[2,2],[2,3],[2,3],[3,3],[3,3],[3,3],[3,4],[3,4],[3,4],[4,4],[4,4],[4,4],[4,4],[4,5],[4,5],[4,5],[4,5],[5,5],[5,5],[5,5],[5,5],[5,5],[5,6],[5,6],[5,6],[5,6],[5,6],[6,6],[6,6],[6,6],[6,6],[6,6]]);i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.render=function(t,e,i){i(null,this.container)},i.prototype.activated=function(){this.closeup=this.container.find(".live-closeup"),this.initSlider(),this.initDimensions(),this.openCloseup(),this.initCloseup(),this.closeCloseup(),this.container.find(".live-girl").click(this.girlClick.bind(this))},i.prototype.girlClick=function(t){this.openCloseup(),this.closeupGirl=$(t.currentTarget),this.closeupName.text(this.closeupGirl.find(".live-girl-name").text()),this.closeupDrinks.text(this.closeupGirl.find(".live-girl-stats-drinks").text()),this.closeupJobs.text(this.closeupGirl.find(".live-girl-stats-jobs").text()),this.closeupPicture.attr("style",this.closeupGirl.attr("style"))},i.prototype.openCloseup=function(){this.closeup.css({display:"block"})},i.prototype.closeCloseup=function(){this.closeup.css({display:"none"})},i.prototype.actionClick=function(t,e){var i=$(e.currentTarget),o=i.parent(),n=+o.find(".live-action-value").text()*t;if(o.attr("class").match(/drink/)){var s=+this.closeupDrinks.text()+n;0>s&&(s=0),this.closeupDrinks.text(s),this.closeupGirl.find(".live-girl-stats-drinks").text(s)}else if(o.attr("class").match(/job/)){var s=+this.closeupJobs.text()+1;0>s&&(s=0),this.closeupJobs.text(s),this.closeupGirl.find(".live-girl-stats-jobs").text(s)}window.setTimeout(this.closeCloseup.bind(this),500)},i.prototype.initCloseup=function(){var t=this.closeup.find(".live-girl-container"),e=.5*this.closeup.find(".live-closeup-girl").width();t.css({height:e,width:e,position:"absolute",top:"50%",right:60,marginTop:0-e/2});var i=this.container.find(".live-closeup-actions-container");i.height()>this.closeup.height()?this.container.find(".live-closeup-actions").css({"overflow-y":"scroll"}):i.css({position:"absolute",top:"50%",left:0,marginTop:0-i.height()/2,width:"100%"}),this.closeup.find(".live-closeup-close").click(this.closeCloseup.bind(this)),this.closeupPicture=this.closeup.find(".live-girl"),this.closeupName=this.closeup.find(".live-girl-name"),this.closeupDrinks=this.closeup.find(".live-girl-stats-drinks"),this.closeupJobs=this.closeup.find(".live-girl-stats-jobs"),this.closeup.find(".live-action-plus").click(this.actionClick.bind(this,1)),this.closeup.find(".live-action-minus").click(this.actionClick.bind(this,-1))},i.prototype.initSlider=function(){var t=this;t.statisticsOpen=!1,t.statistics=t.container.find(".live-statistics"),t.statistics.css({marginLeft:$(window).width()}),t.slider=t.statistics.find(".live-slider"),t.slider.click(function(){t.statisticsOpen?t.statistics.animate({marginLeft:$(window).width()},250):t.statistics.animate({marginLeft:0},250),t.statisticsOpen=!t.statisticsOpen})},i.prototype.initDimensions=function(){var t=this.container.find(".live-girl-container"),e=s[t.length-1],i={width:100/e[1]+"%",height:100/e[0]+"%"};t.css(i)},e.exports=i},{"../config.js":6,"./page.js":16}],13:[function(t,e){"use strict";function i(t,e){o.call(this,t,e),this.path=t,this.params=e}var o=t("./page.js");i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.render=function(t,e,i){return 204===e.status?location.href="/":void i(null,this.container)},i.prototype._formCallback=function(t,e){return t?swal({title:"Error!",text:t.error,type:"error"}):(swal({title:"Juchu!",text:e.message,type:"success"}),void window.setTimeout(function(){location.href="/"},1e3))},e.exports=i},{"./page.js":16}],14:[function(t,e){"use strict";function i(t,e){o.call(this,t,e),this.path=t,this.params=e}var o=t("./page.js");i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.render=function(){location.href="/"},e.exports=i},{"./page.js":16}],15:[function(t,e){"use strict";function i(t,e){o.call(this,t,e),this.path=t,this.params=e}var o=t("./page.js");i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.render=function(t,e,i){this._activated(),i(null,this.container)},i.prototype._activated=function(){this.container.find(".model-list-item").click(function(t){var e=t.currentTarget;e.big=!e.big,$(e).css({height:e.big?"500px":"60px"})})},i.prototype.activated=function(){this._activated()},e.exports=i},{"./page.js":16}],16:[function(t,e){"use strict";function i(t,e){this.path=t,this.params=e,this.container=$(".mainpage")}var o=t("../components").forms,n=t("../components").lists;i.prototype.init=function(t){function e(e,i,n){o.container.html(e),o.activatePage(),o.render(e,n,t)}function i(e,i,n){swal({title:"Oops...",text:n,type:"error"}),"[object Function]"===Object.prototype.toString.call(o.error)?o.error(e,i,n):t(e)}var o=this;$.ajax({type:"get",url:this.path,success:e,error:i})},i.prototype.render=function(t,e,i){i(null,this.container)},i.prototype._formCallback=function(){console.log(arguments)},i.prototype.activatePage=function(){o.enable(this.container,this._formCallback.bind(this)),n.enable(this.container),this.activated&&"[object Function]"===Object.prototype.toString.call(this.activated)&&this.activated()},e.exports=i},{"../components":3}],17:[function(t,e){"use strict";function i(t,e){o.call(this,t,e),this.path=t,this.params=e}var o=t("./page.js");i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype.render=function(t,e,i){i(null,this.container)},e.exports=i},{"./page.js":16}],18:[function(t,e){"use strict";function i(t){var e=[];return t="^"+t+"$",t=t.replace(/(:.*?)(\?|\$|\/)/g,function(t,i,o){return e.push(i.substr(1)),"(.*?)"+o}),{path:t,lookup:e}}function o(t,e){if(t!==b||x){console.log(t);for(var i=0,o=m.length;o>i;i++){var s=m[i],a=t.match(s.route);if(a){var c={};s.lookup.forEach(function(t,e){var i=a[e+1];i&&("/"===i.charAt(i.length-1)&&(i=i.substr(0,i.length-1)),c[t]=i)}),NProgress.start();var p=new s.page(t,c);x?(p.activatePage(),NProgress.done(),x=!1):p.init(function(i,o){return NProgress.done(),i?!1:(b=t,e&&r(t),void n(o))});break}}}}function n(t){t.find("a").click(s)}function s(t){t.preventDefault();var e=this.pathname;"/"!==e.charAt(e.length-1)&&(e+="/"),o(e,!0)}var r,a,c=(t("./config.js"),t("./pages").IndexPage),p=t("./pages").LeaguesPage,l=t("./pages").LeaguePage,u=t("./pages").LeaguesAddPage,g=t("./pages").LivePage,h=t("./pages").LoginPage,f=t("./pages").LogoutPage,d=t("./pages").ModelsPage,v=(t("./pages").Page,t("./pages").RulebooksPage),m=[],y={"/":c,"/leagues/add/":u,"/leagues/":p,"/leagues/:leagueId/:page?":l,"/live/":g,"/login/":h,"/logout/":f,"/models/:modelId?":d,"/rulebooks/:rulebookId?":v},b=location.pathname,x=!0;for(var j in y){var w=y[j],k=i(j);m.push({route:new RegExp(k.path),lookup:k.lookup,page:w})}history.pushState?(r=function(t){history.pushState(null,null,t)},a=function(){o(location.pathname)},window.setTimeout(function(){$(window).on("popstate",a)},1e3)):(r=function(t){location.hash="!"+t},a=function(){o(location.hash.substr(2))},location.hash&&a(),$(window).on("hashchange",a)),n($("body")),"/"!==b.charAt(b.length-1)&&(b+="/"),o(b),e.exports={getPage:o}},{"./config.js":6,"./pages":7}]},{},[1]);
//# sourceMappingURL=gntm-v2.0.0.1.min.js.map