!function t(e,n,i){function r(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var p=n[s]={exports:{}};e[s][0].call(p.exports,function(t){var n=e[s][1][t];return r(n?n:t)},p,p.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(t){t("./components").Login,t("./router.js")},{"./components":3,"./router.js":20}],2:[function(t,e){"use strict";function n(t,e){var n={callback:e||function(){}};t.find("form").on("submit",r.bind(null,n)),t.find("form .submit-substitute").click(i)}function i(t){var e=t.currentTarget,n=e.getAttribute("data-form"),i=null;if(n)i=document.forms[n];else{for(;"FORM"!==e.nodeName&&"BODY"!==e.nodeName;)e=e.parentNode;"FORM"===e.nodeName&&(i=e)}if(i){if(!i.submitButton){var r=document.createElement("input");r.type="submit",r.setAttribute("style","display:none"),i.appendChild(r),i.submitButton=r}i.submitButton.click()}}function r(t,e){e.preventDefault();var n=e.currentTarget;t.url=n.getAttribute("data-action"),t.type=n.getAttribute("data-method"),t.form=n;var i=n.getAttribute("data-html");return i&&"false"!==i||(t.url=c+t.url),s(o(n),t),!1}function o(t){for(var e={},n=0;n<t.length;n++){var i=t[n];if("text"===i.type||"password"===i.type||"hidden"===i.type||"radio"===i.type&&i.checked||"TEXTAREA"===i.nodeName){var r=i.name.match(/^(\w+)\[(\d+)\]\[(\w+)\]/);if(r){var o=r[1],s=r[2],a=r[3];e.hasOwnProperty(o)||(e[o]=[]),e[o].hasOwnProperty(s)||(e[o][s]={}),e[o][s][a]=i.value}else e[i.name]=i.value}}return e}function s(t,e){function n(t,n,i){e.callback(null,t,n,i,e.form)}function i(t,n,i){var r={response:t,status:n,error:i,message:t.responseJSON.message,form:e.form};e.callback(r)}e=e||{},e.method=e.type||"get",e.url=e.url||"",e.contentType=e.contentType||"application/json",e.dataType=e.dataType||"json";var r={url:e.url,type:e.method,contentType:e.contentType+"; charset=UTF-8",dataType:e.dataType,success:n,error:i};r.data=JSON.stringify(t),$.ajax(r)}var a=t("../config.js"),c=["",a.client.api.path,a.client.api.version].join("/");e.exports={enable:n}},{"../config.js":7}],3:[function(t,e){e.exports.forms=t("./forms.js"),e.exports.lists=t("./lists.js"),e.exports.Login=t("./login.js"),e.exports.template=t("./template.js")},{"./forms.js":2,"./lists.js":4,"./login.js":5,"./template.js":6}],4:[function(t,e){"use strict";function n(t){$.each(t.find(".list"),function(t,e){e=$(e),"false"!==e.attr("data-enable")&&i(e)})}function i(t){t.find(".list-handle").click(r.bind(null,t))}function r(t,e){var n=$(e.currentTarget),i=n.attr("data-sortname"),r=n.attr("data-sortorder"),o="asc"===r?1:-1,s=n.attr("data-type")||"string",a=t.find(".list-item");a.sort(function(t,e){var n=$(t).attr("data-"+i),r=$(e).attr("data-"+i);return"number"===s?(n=+n,r=+r):"date"===s?(n=n?new Date(n):new Date(2016,0,1),r=r?new Date(r):new Date(2016,0,1)):"string"===s&&(n=n.toLowerCase(),r=r.toLowerCase()),n>r?1*o:r>n?-1*o:0}),n.attr("data-sortorder",1===o?"desc":"asc"),$.each(a,function(e,n){t.append(n)})}e.exports={enable:n}},{}],5:[function(t,e){function n(){location.href="/login"}function i(t){swal({title:"Oops...",text:t.responseJSON.message,type:"error"})}e.exports={path:"/login",onSuccess:n,onError:i}},{}],6:[function(t,e){"use strict";function n(t,e){return t.replace(/#{(.*?)}/gi,function(t,n){return"undefined"==typeof e[n]?"":e[n]})}e.exports=n},{}],7:[function(t,e){var n={client:{api:{path:"api",version:1}}};e.exports=n},{}],8:[function(t,e){e.exports.IndexPage=t("./indexPage.js"),e.exports.LeaguePage=t("./leaguePage.js"),e.exports.LeaguesPage=t("./leaguesPage.js"),e.exports.LeaguesAddPage=t("./leaguesAddPage.js"),e.exports.LivePage=t("./livePage.js"),e.exports.LoginPage=t("./loginPage.js"),e.exports.LogoutPage=t("./logoutPage.js"),e.exports.ModelsPage=t("./modelsPage.js"),e.exports.Page=t("./page.js"),e.exports.PlaydaysPage=t("./playdaysPage.js"),e.exports.RulebooksPage=t("./rulebooksPage.js")},{"./indexPage.js":9,"./leaguePage.js":10,"./leaguesAddPage.js":11,"./leaguesPage.js":12,"./livePage.js":13,"./loginPage.js":14,"./logoutPage.js":15,"./modelsPage.js":16,"./page.js":17,"./playdaysPage.js":18,"./rulebooksPage.js":19}],9:[function(t,e){"use strict";function n(t,e){i.call(this,t,e),this.path=t,this.params=e}var i=t("./page.js");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.prototype.render=function(t,e,n){n(null,this.container)},n.prototype._formCallback=function(t,e){return t?swal({title:"Error!",text:t.response.responseJSON.message,type:"error"}):(swal({title:"Juchu!",text:e.message,type:"success"}),void window.setTimeout(function(){location.href="/"},1e3))},e.exports=n},{"./page.js":17}],10:[function(t,e){"use strict";function n(t,e){f.call(this,t,e),this.path=t,this.params=e}function i(t){var e=t.getBoundingClientRect();return{top:e.top+a(),left:e.left+s()}}function r(t,e){var n=i(e),r=e.offsetWidth,o=e.offsetHeight,s=i(t),a=t.offsetWidth,c=t.offsetHeight;return!(s.left>n.left+r-r/2||s.left+a<n.left+r/2||s.top>n.top+o-o/2||s.top+c<n.top+o/2)}function o(t,e){$.each(g,function(n,i){r(i,t.element)?e(i):$(i).css({opacity:.7})})}function s(){return window.pageXOffset||window.document.documentElement.scrollLeft}function a(){return window.pageYOffset||window.document.documentElement.scrollTop}function c(t){var e=t.find(".roaster-girl");e.sort(function(t,e){return t=t.getAttribute("data-displayname"),e=e.getAttribute("data-displayname"),t>e?-1:e>t?1:0}),$.each(e,function(e,n){t.prepend($(n).parent())})}function l(t,e,n){function i(){}function r(){}var o={},s={model:n,league:d};o.method="patch",o.url=y+"/"+t+"/"+e,o.contentType="application/json",o.dataType="json";var a={url:o.url,type:o.method,contentType:o.contentType+"; charset=UTF-8",dataType:o.dataType,success:i,error:r};a.data=JSON.stringify(s),$.ajax(a)}var p,u,g,d,f=t("./page.js"),h=t("../config.js"),m={},y=["",h.client.api.path,h.client.api.version,"roasters"].join("/"),v=!1;n.prototype=Object.create(f.prototype),n.prototype.constructor=n,n.prototype.render=function(t,e,n){n(null,this.container)},n.prototype._activated=function(){function t(t){$(t.element).css({zIndex:4}),p.css({opacity:.7}),u.css({marginTop:0-u.height()});var e=$(t.element).parent().parent().parent().attr("data-member");$.each(g,function(t,n){n=$(n),n.css({display:n.attr("data-member")===e?"none":"inline-block"})})}function e(t){o(t,function(t){$(t).css({opacity:1})})}function n(t){$(t.element).css({zIndex:1,top:0,left:0}).addClass("animate"),p.css({opacity:0}),u.css({marginTop:0}),o(t,function(e){e=$(e);var n=e.attr("data-member");if(m.hasOwnProperty(n)){var i=m[n],r=$(t.element).parent().parent().parent().attr("data-member"),o=n;i.prepend($(t.element).parent()),c(i),l(r,o,$(t.element).attr("data-modelId"))}})}return d=$(".page-league").attr("data-league"),(v="true"===$(".page-league").attr("data-isAdmin"))?($(".page-league-navigation-item-management").click(function(){$(".page-navigation-management").toggle(0)}),g=this.container.find(".roaster-overlay-category"),$.each(this.container.find(".roaster"),function(t,e){e=$(e),m[e.attr("data-member")]=e.find(".roaster-container")}),p=this.container.find(".roaster-overlay"),u=this.container.find(".roaster-overlay-menu"),this.container.find(".roaster-girl").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){var t=$(this);t.removeClass("animate")}),void $.each(this.container.find(".roaster-girl"),function(i,r){var o=new Draggabilly(r,function(){console.log(arguments)});o.on("dragStart",t),o.on("dragMove",e),o.on("dragEnd",n)})):!1},n.prototype.activated=function(){this._activated()},n.prototype.roasterGirlStart=function(t){var e=t.currentTarget;e.clientX=t.clientX,e.clientY=t.clientY,e.activated=!0,p.css({opacity:1,display:"block"}),$(e).css({zIndex:3})},n.prototype.roasterGirlMove=function(t){var e=t.currentTarget;if(e.activated){var n=t.clientX-e.clientX,i=t.clientY-e.clientY;$(e).css({transform:"translate3d("+n+"px, "+i+"px, 0px)"})}},n.prototype.roasterGirlStop=function(t){var e=t.currentTarget;e.activated=!1,e=$(e),e.addClass("animate"),e.css({transform:"translate3d(0px, 0px, 0px)",zIndex:0}),p.css({opacity:0})},n.prototype._formCallback=function(e,n,i,r,o){return e?swal({title:"Error!",text:e.error,type:"error"}):void("enterLeague"===o.name?(swal({title:"Bewerbung gesendet!",text:"Dein Antrag muss noch bestätigt werden.",type:"success"}),$(o).remove()):"confirmMember"===o.name?(swal({title:"Bestätigung erfolgreich!",text:"Deine Liga hat ein neues Mitglied.",type:"success",timer:1500}),$(o).remove()):"denyMember"===o.name?(swal({title:"Bewerbung gelöscht!",text:"Die Bewerbung des Spielers wurde erfolgreich gelöscht.",type:"success",timer:1500}),$(o).parent().parent().remove()):"deleteMember"===o.name?(swal({title:"Mitglied gelöscht!",text:"Das Mitglied wurde erfolgreich gelöscht.",type:"success",timer:1500}),$(o).parent().parent().remove()):"cancelSubscription"===o.name?(swal({title:"Antrag zurückgezogen!",text:"Dein Antrag wurde erfolgreich zurückgezogen.",type:"success",timer:1500}),$(o).parent().parent().remove()):"cancelMembership"===o.name?(swal({title:"Ausgetreten!",text:"Du bist erfolgreich aus der Liga ausgetreten.",type:"success",timer:1500}),$(o).parent().parent().remove()):"promoteMember"===o.name?(swal({title:"Admin hinzugefügt!",text:"Das Mitglied hat jetzt Adminrechte.",type:"success",timer:1500}),$(o).remove()):"degradeMember"===o.name?(swal({title:"Adminrechte entzogen!",text:"Das Mitglied ist von nun an kein Admin mehr.",type:"success",timer:1500}),$(o).remove()):"createPost"===o.name?(swal({title:"Beitrag erstellt!",text:"Dein neuer Beitrag ist erfolgreich erstellt worden.",type:"success",timer:1500}),t("../router").getPage("/leagues/"+n.post.league+"/",!0)):"editPost"===o.name?(swal({title:"Beitrag bearbeitet!",text:"Der Beitrag ist erfolgreich bearbeitet worden.",type:"success",timer:1500}),t("../router").getPage("/leagues/"+n.post.league+"/posts",!0)):"deletePost"===o.name?(swal({title:"Beitrag gelöscht!",text:"Der Beitrag wurde erfolgreich gelöscht.",type:"success",timer:1500}),$(o).parent().parent().remove()):"createPlayday"===o.name?(swal({title:"Spieltag erstellt!",text:"Ein neuer Spieltag ist erfolgreich erstellt worden.",type:"success",timer:1500}),t("../router").getPage("/leagues/"+n.playday.league+"/playdays",!0)):"editPlayday"===o.name?(swal({title:"Spieltag bearbeitet!",text:"Der Spieltag ist erfolgreich bearbeitet worden.",type:"success",timer:1500}),t("../router").getPage("/leagues/"+n.playday.league+"/playdays",!0)):"deletePlayday"===o.name?(swal({title:"Spieltag gelöscht!",text:"Der Spieltag wurde erfolgreich gelöscht.",type:"success",timer:1500}),$(o).parent().parent().remove()):"postComment"===o.name&&(swal({title:"Kommentar erstellt!",text:"Dein Kommentar ist erfolgreich erstellt worden.",type:"success"}),t("../router").getPage("/leagues/"+n.comment.league+"/index/"+n.comment.post,!0)))},e.exports=n},{"../config.js":7,"../router":20,"./page.js":17}],11:[function(t,e){"use strict";function n(t,e){i.call(this,t,e),this.path=t,this.params=e}var i=t("./page.js");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.prototype.render=function(t,e,n){n(null,this.container)},n.prototype._formCallback=function(e,n){return e?swal({title:"Error!",text:e.error,type:"error"}):void t("../router").getPage("/leagues/"+n.league._id+"/",!0)},e.exports=n},{"../router":20,"./page.js":17}],12:[function(t,e){"use strict";function n(t,e){i.call(this,t,e),this.path=t,this.params=e}var i=t("./page.js");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.prototype.render=function(t,e,n){n(null,this.container)},e.exports=n},{"./page.js":17}],13:[function(t,e){"use strict";function n(t,e){i.call(this,t,e),this.path=t,this.params=e,this.container=$(".livepage")}var i=t("./page.js"),r=t("../config.js"),o=(["",r.client.api.path,r.client.api.version].join("/"),[[1,1],[1,2],[2,2],[2,2],[2,3],[2,3],[3,3],[3,3],[3,3],[3,4],[3,4],[3,4],[4,4],[4,4],[4,4],[4,4],[4,5],[4,5],[4,5],[4,5],[5,5],[5,5],[5,5],[5,5],[5,5],[5,6],[5,6],[5,6],[5,6],[5,6],[6,6],[6,6],[6,6],[6,6],[6,6]]);n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.prototype.render=function(t,e,n){n(null,this.container)},n.prototype.activated=function(){this.closeup=this.container.find(".live-closeup"),this.initSlider(),this.initDimensions(),this.openCloseup(),this.initCloseup(),this.closeCloseup(),this.container.find(".live-girl").click(this.girlClick.bind(this))},n.prototype.girlClick=function(t){this.openCloseup(),this.closeupGirl=$(t.currentTarget),this.closeupName.text(this.closeupGirl.find(".live-girl-name").text()),this.closeupDrinks.text(this.closeupGirl.find(".live-girl-stats-drinks").text()),this.closeupJobs.text(this.closeupGirl.find(".live-girl-stats-jobs").text()),this.closeupPicture.attr("style",this.closeupGirl.attr("style"))},n.prototype.openCloseup=function(){this.closeup.css({display:"block"})},n.prototype.closeCloseup=function(){this.closeup.css({display:"none"})},n.prototype.actionClick=function(t,e){var n=$(e.currentTarget),i=n.parent(),r=+i.find(".live-action-value").text()*t;if(i.attr("class").match(/drink/)){var o=+this.closeupDrinks.text()+r;0>o&&(o=0),this.closeupDrinks.text(o),this.closeupGirl.find(".live-girl-stats-drinks").text(o)}else if(i.attr("class").match(/job/)){var o=+this.closeupJobs.text()+1;0>o&&(o=0),this.closeupJobs.text(o),this.closeupGirl.find(".live-girl-stats-jobs").text(o)}window.setTimeout(this.closeCloseup.bind(this),500)},n.prototype.initCloseup=function(){var t=this.closeup.find(".live-girl-container"),e=.5*this.closeup.find(".live-closeup-girl").width();t.css({height:e,width:e,position:"absolute",top:"50%",right:60,marginTop:0-e/2});var n=this.container.find(".live-closeup-actions-container");n.height()>this.closeup.height()?this.container.find(".live-closeup-actions").css({"overflow-y":"scroll"}):n.css({position:"absolute",top:"50%",left:0,marginTop:0-n.height()/2,width:"100%"}),this.closeup.find(".live-closeup-close").click(this.closeCloseup.bind(this)),this.closeupPicture=this.closeup.find(".live-girl"),this.closeupName=this.closeup.find(".live-girl-name"),this.closeupDrinks=this.closeup.find(".live-girl-stats-drinks"),this.closeupJobs=this.closeup.find(".live-girl-stats-jobs"),this.closeup.find(".live-action-plus").click(this.actionClick.bind(this,1)),this.closeup.find(".live-action-minus").click(this.actionClick.bind(this,-1))},n.prototype.initSlider=function(){var t=this;t.statisticsOpen=!1,t.statistics=t.container.find(".live-statistics"),t.statistics.css({marginLeft:$(window).width()}),t.slider=t.statistics.find(".live-slider"),t.slider.click(function(){t.statisticsOpen?t.statistics.animate({marginLeft:$(window).width()},250):t.statistics.animate({marginLeft:0},250),t.statisticsOpen=!t.statisticsOpen})},n.prototype.initDimensions=function(){var t=this.container.find(".live-girl-container"),e=o[t.length-1],n={width:100/e[1]+"%",height:100/e[0]+"%"};t.css(n)},e.exports=n},{"../config.js":7,"./page.js":17}],14:[function(t,e){"use strict";function n(t,e){i.call(this,t,e),this.path=t,this.params=e}var i=t("./page.js");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.prototype.render=function(t,e,n){return 204===e.status?location.href="/":void n(null,this.container)},n.prototype._formCallback=function(t,e){return t?swal({title:"Error!",text:t.message,type:"error"}):(swal({title:"Juchu!",text:e.message,type:"success"}),void window.setTimeout(function(){location.href="/"},1e3))},e.exports=n},{"./page.js":17}],15:[function(t,e){"use strict";function n(t,e){i.call(this,t,e),this.path=t,this.params=e}var i=t("./page.js");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.prototype.render=function(){location.href="/"},e.exports=n},{"./page.js":17}],16:[function(t,e){"use strict";function n(t,e){i.call(this,t,e),this.path=t,this.params=e}var i=t("./page.js");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.prototype.render=function(t,e,n){this._activated(),n(null,this.container)},n.prototype._activated=function(){},n.prototype.activated=function(){this._activated()},e.exports=n},{"./page.js":17}],17:[function(t,e){"use strict";function n(t,e){this.path=t,this.params=e,this.container=$(".mainpage")}var i=t("../components").forms,r=t("../components").lists;n.prototype.init=function(t){function e(e,n,r){i.container.html(e),i.activatePage(),i.render(e,r,t)}function n(e,n,r){swal({title:"Oops...",text:r,type:"error"}),"[object Function]"===Object.prototype.toString.call(i.error)?i.error(e,n,r):t(e)}var i=this;$.ajax({type:"get",url:this.path,success:e,error:n})},n.prototype.render=function(t,e,n){n(null,this.container)},n.prototype._formCallback=function(){console.log(arguments)},n.prototype.activatePage=function(){i.enable(this.container,this._formCallback.bind(this)),r.enable(this.container),this.activated&&"[object Function]"===Object.prototype.toString.call(this.activated)&&this.activated()},e.exports=n},{"../components":3}],18:[function(t,e){"use strict";function n(t,e){i.call(this,t,e),this.path=t,this.params=e}var i=t("./page.js");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.prototype.render=function(t,e,n){n(null,this.container)},e.exports=n},{"./page.js":17}],19:[function(t,e){"use strict";function n(t,e){i.call(this,t,e),this.path=t,this.params=e}var i=t("./page.js");n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.prototype.render=function(t,e,n){n(null,this.container)},e.exports=n},{"./page.js":17}],20:[function(t,e){"use strict";function n(t){var e=[];return t="^"+t+"$",t=t.replace(/(:.*?)(\?|\$|\/)/g,function(t,n,i){return e.push(n.substr(1)),"(.*?)"+i}),{path:t,lookup:e}}function i(t,e){if(t!==b||x){console.log(t);for(var n=0,i=y.length;i>n;n++){var o=y[n],a=t.match(o.route);if(a){var c={};o.lookup.forEach(function(t,e){var n=a[e+1];n&&("/"===n.charAt(n.length-1)&&(n=n.substr(0,n.length-1)),c[t]=n)}),NProgress.start();var l=new o.page(t,c);x?(l.activatePage(),NProgress.done(),x=!1):l.init(function(n,i){return NProgress.done(),n?!1:(b=t,e&&s(t),void r(i))});break}}}}function r(t){t.find("a").click(o)}function o(t){this.href.match(/\.pdf$/)||t.preventDefault();var e=this.pathname;"/"!==e.charAt(e.length-1)&&(e+="/"),i(e,!0)}var s,a,c=(t("./config.js"),t("./pages").IndexPage),l=t("./pages").LeaguesPage,p=t("./pages").LeaguePage,u=t("./pages").LeaguesAddPage,g=t("./pages").LivePage,d=t("./pages").LoginPage,f=t("./pages").LogoutPage,h=t("./pages").ModelsPage,m=(t("./pages").Page,t("./pages").RulebooksPage),y=[],v={"/":c,"/leagues/add/":u,"/leagues/":l,"/leagues/:leagueId/:page?":p,"/live/":g,"/login/":d,"/logout/":f,"/models/:modelId?":h,"/rulebooks/:rulebookId?":m},b=location.pathname,x=!0;for(var j in v){var w=v[j],P=n(j);y.push({route:new RegExp(P.path),lookup:P.lookup,page:w})}history.pushState?(s=function(t){history.pushState(null,null,t)},a=function(){i(location.pathname)},window.setTimeout(function(){$(window).on("popstate",a)},1e3)):(s=function(t){location.hash="!"+t},a=function(){i(location.hash.substr(2))},location.hash&&a(),$(window).on("hashchange",a)),r($("body")),"/"!==b.charAt(b.length-1)&&(b+="/"),i(b),e.exports={getPage:i}},{"./config.js":7,"./pages":8}]},{},[1]);
//# sourceMappingURL=gntm-v2.0.0.1.min.js.map